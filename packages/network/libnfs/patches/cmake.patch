From 5bdafaa770f287b54c026e31fed5ad9ab808cfa3 Mon Sep 17 00:00:00 2001
From: Rudi Heitbaum <rudi@heitbaum.com>
Date: Mon, 29 Aug 2022 14:55:43 +0000
Subject: [PATCH] cmake: update utils to be installed

---
 CMakeLists.txt       | 1 +
 utils/CMakeLists.txt | 2 ++
 2 files changed, 3 insertions(+)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 4a9c5b35..35e9cd47 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -6,6 +6,7 @@ project(libnfs
 
 set(SOVERSION 11.0.0 CACHE STRING "" FORCE)
 
+set(INSTALL_BIN_DIR "${CMAKE_INSTALL_PREFIX}/bin" CACHE PATH "Installation directory for binaries")
 set(INSTALL_LIB_DIR "${CMAKE_INSTALL_PREFIX}/lib" CACHE PATH "Installation directory for libraries")
 set(INSTALL_INC_DIR "${CMAKE_INSTALL_PREFIX}/include" CACHE PATH "Installation directory for headers")
 set(INSTALL_MAN_DIR "${CMAKE_INSTALL_PREFIX}/share/man" CACHE PATH "Installation directory for manual pages")
diff --git a/utils/CMakeLists.txt b/utils/CMakeLists.txt
index 7e84f2fe..c7ba412b 100644
--- a/utils/CMakeLists.txt
+++ b/utils/CMakeLists.txt
@@ -7,4 +7,6 @@ endif()
 foreach(TARGET ${UTILITIES})
   add_executable(${TARGET} ${TARGET}.c)
   target_link_libraries(${TARGET} nfs nfs_mount)
+  install(FILES ${CMAKE_CURRENT_BINARY_DIR}/${TARGET}
+          DESTINATION ${INSTALL_BIN_DIR})
 endforeach()
